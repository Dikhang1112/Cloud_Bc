{% extends "base.html" %}
{% block title %}
API & S3
{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='apiDb.css') }}">

<div class="container mt-5">
    <h1 class="text-center mb-5 title"><i class="fas fa-sync-alt me-2"></i>Hệ thống ETL</h1>
    <div class="row">
        <!-- Form 1: Nhập URL hoặc Chọn Database -->
        <div class="col-lg-6 mb-4">
            <!-- Form API/JSON Server -->
            <div class="card shadow-custom mb-4">
                <div class="card-header bg-gradient-primary text-white">
                    <h5 class="card-title mb-0"><i class="fas fa-link me-2"></i>Nhập URL API hoặc Json Server</h5>
                </div>
                <div class="card-body">
                    <form id="urlForm">
                        <div class="mb-3">
                            <label for="apiUrl" class="form-label">API và Json Server</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-link"></i></span>
                                <input type="text" class="form-control input-custom" id="apiUrl" name="apiUrl" placeholder="http://localhost:3000/products">
                            </div>
                        </div>
                        <div class="d-flex gap-3">
                            <button type="button" class="btn btn-extract btn-custom flex-fill" id="extractBtn">
                                <i class="fas fa-play me-2"></i>Trích Xuất
                            </button>
                            <button type="button" class="btn btn-transform btn-custom flex-fill" id="transformBtn">
                                <i class="fas fa-cogs me-2"></i>Chuẩn Hóa
                            </button>
                            <button type="button" class="btn btn-load btn-custom flex-fill" id="loadBtn">
                                <i class="fas fa-database me-2"></i>Lưu
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <!-- Form Database -->
            <div class="card shadow-custom">
                <div class="card-header bg-gradient-primary text-white">
                    <h5 class="card-title mb-0"><i class="fas fa-database me-2"></i>ETL từ MySQL Database</h5>
                </div>
                <div class="card-body">
                    <form id="databaseForm">
                        <div class="mb-3">
                            <label for="databaseSelect2" class="form-label">Chọn Database:</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-database"></i></span>
                                <select class="form-select select-custom" id="databaseSelect2" name="databaseSelect2">
                                    <option value="">-- Chọn database --</option>
                                    <!-- Các database sẽ được thêm động bằng JavaScript -->
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="tableSelect2" class="form-label">Chọn Bảng:</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-table"></i></span>
                                <select class="form-select select-custom" id="tableSelect2" name="tableSelect2" disabled>
                                    <option value="">-- Chọn bảng --</option>
                                    <!-- Các bảng sẽ được thêm động bằng JavaScript -->
                                </select>
                            </div>
                        </div>
                        <div class="d-flex gap-3">
                            <button type="button" class="btn btn-extract btn-custom flex-fill" id="extractBtn2">
                                <i class="fas fa-play me-2"></i>Trích Xuất
                            </button>
                            <button type="button" class="btn btn-transform btn-custom flex-fill" id="transformBtn2">
                                <i class="fas fa-cogs me-2"></i>Chuẩn Hóa
                            </button>
                            <button type="button" class="btn btn-load btn-custom flex-fill" id="loadBtn2">
                                <i class="fas fa-database me-2"></i>Lưu
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Bên phải: Bảng dữ liệu -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow-custom">
                <div class="card-header bg-gradient-secondary text-white">
                    <h5 class="card-title mb-0"><i class="fas fa-table me-2"></i>Dữ liệu</h5>
                </div>
                <div class="card-body">
                    <p id="noDataMessage" class="text-muted no-data-message">Chưa có dữ liệu để hiển thị.</p>
                    <div class="table-responsive">
                        <table id="dataTable" class="table table-custom d-none">
                            <thead id="dataTableHead">
                                <!-- Các cột sẽ được thêm động bằng JavaScript -->
                            </thead>
                            <tbody id="dataTableBody">
                                <!-- Dữ liệu sẽ được thêm động bằng JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='index2.js') }}"></script>
<script src="{{ url_for('static', filename='index3.js') }}"></script>
{% endblock %}